webpackJsonp([0],{"+B+H":function(t,e){},"/EjT":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},n=[],r={render:a,staticRenderFns:n};e.a=r},"/r5n":function(t,e){},"/w5R":function(t,e,s){"use strict";var a=s("2QDH"),n=s.n(a),r=s("mvHQ"),o=s.n(r);e.a={name:"Cart",props:["user"],data:function(){return{thankYou:"",checkedPayment:"",showCheckOut:!1,showCart:!0,saveMsg:"",msg:"",booksInCart:"",payment:"",content:"cart"}},created:function(){this.getBooksFromCart(),this.getPayment()},methods:{getBooksFromCart:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"cart/"+t.user.id,!0),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);!1===s?(t.msg="Cart is empty yet",t.booksInCart=""):(s.forEach(function(t){t.checkbox=!1}),t.booksInCart=s)}},e.send()},plus:function(t){var e=this;e.booksInCart[t].count++,e.saveMsg="Not Aplyed"},minus:function(t){var e=this;e.saveMsg="Not Aplyed",e.booksInCart[t].count>1&&e.booksInCart[t].count--},refresh:function(){var t=this;t.saveMsg="";var e=t.booksInCart,s=!1;if(e.forEach(function(t){(+t.count<1||isNaN(+t.count))&&(s=!0)}),s)t.getBooksFromCart(),t.saveMsg="Count must be a positive integer";else{var a=[];e.forEach(function(t){a.push({id_book:t.id,count:t.count,checkbox:t.checkbox})}),a.unshift({id_user:t.user.id});var n=new XMLHttpRequest,r=o()(a);n.open("PUT",getUrl()+"cart/",!0),n.setRequestHeader("Content-type","application/json; charset=utf-8"),n.onreadystatechange=function(){if(4==n.readyState)if(200!=n.status)alert(n.status+": "+n.statusText);else{var e=JSON.parse(n.responseText);t.saveMsg=!0!==e?"Count must be a positive Integer":"Updated",t.getBooksFromCart()}},n.send(r)}},goCheckOut:function(){var t=this;t.content="checkout",t.getBooksFromCart(),t.getPayment()},getPayment:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"payment/",!0),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);!1===s?t.msg="Payment not found":(s.forEach(function(t){t.checked=!1}),t.payment=s)}},e.send()},goCart:function(){this.content="cart"},addOrder:function(){var t=this,e=t.booksInCart,s=t.checkedPayment;if(s){var a=[{id_user:t.user.id,id_payment:s,disc_user:t.user.discount}],n=[];e.forEach(function(t){n.push({id_book:t.id,count:t.count,price:t.price,disc_book:t.discount})}),a.push(n);var r=new XMLHttpRequest,i=o()(a);r.open("POST",getUrl()+"orders/",!0),r.setRequestHeader("Content-type","application/json; charset=utf-8"),r.onreadystatechange=function(){if(4==r.readyState)if(200!=r.status)alert(r.status+": "+r.statusText);else{var e=JSON.parse(r.responseText);e?t.clearCart():t.msg="Sorry, try again later"}},r.send(i)}},clearCart:function(){var t=this,e=new XMLHttpRequest;e.open("DELETE",getUrl()+"cart/id/"+t.user.id,!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.$router.push({path:"/thankyou/"}):t.msg="Sorry, try again later"}},e.send(null)}},computed:{totalPrice:function(){var t=this,e=0,s=t.booksInCart;return s.forEach(function(t){if(1!==n()(t.count))return void(e="-");e+=+t.price*+t.count-+t.price*+t.discount/100},s),"string"==typeof e?e="-":e.toFixed(2)},totalWithUserDiscount:function(){var t=this,e=t.totalPrice;if("-"!==e)var s=e-t.totalPrice*+t.user.discount/100;else s="-";return s.toFixed(2)}}}},"1GKN":function(t,e,s){"use strict";var a=s("mvHQ"),n=s.n(a),r=s("z8oB");e.a={name:"EditUser",beforeRouteUpdate:function(t,e,s){this.getUser(t.params.id),this.showOrdrers=!1,this.orderMsg="",s()},data:function(){return{user:"",userData:"",msg:"",showOrdrers:!1,orderMsg:""}},created:function(){this.getUserData(),this.getUser(this.$route.params.id)},methods:{checkAuth:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"auth/",!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?t.getUserInfo():(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserInfo:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"users/"+t.user.id,!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?(t.user=s[0],t.checkRole()):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserData:function(){var t=this;localStorage.user?t.user=JSON.parse(localStorage.user):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0"),t.checkAuth()},checkRole:function(){var t=this;"admin"!=t.user.role&&t.$router.push("/")},getUser:function(t){var e=this,s=new XMLHttpRequest;s.open("GET",getUrl()+"users/"+t,!0),s.onreadystatechange=function(){if(4==s.readyState)if(200!=s.status)alert(s.status+": "+s.statusText);else{var t=JSON.parse(s.responseText);t?(e.userData=t[0],e.userData.status=!!+e.userData.status):e.$router.push("/admin/")}},s.send()},changeStatus:function(){var t=this;t.userData.status=!t.userData.status},save:function(){var t=this,e=new XMLHttpRequest,s=n()(t.userData);e.open("PUT",getUrl()+"users/",!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);!0===s?(t.msg="Updated",t.$parent.getUsers()):t.msg=s,t.getUser(t.$route.params.id)}},e.send(s)},getOrders:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"orders/"+t.userData.id,!0),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.userData.orders=JSON.parse(e.responseText):t.msg="Have no orders"}},e.send()},showUserOrders:function(){var t=this;t.orderMsg="",t.showOrdrers=!t.showOrdrers}},computed:{StatusString:function(){return this.userData.status?"Active":"Inactive"}},components:{"user-orders":r.a}}},"24Rr":function(t,e){},"2dOA":function(t,e){},"4eyV":function(t,e,s){"use strict";var a=s("mvHQ"),n=s.n(a);e.a={name:"OrdersOfUser",props:["id","user"],data:function(){return{userData:"",msg:"",orders:"",statuses:"",refreshed:!1,sort:!0}},created:function(){this.getStatuses(),this.getOrders()},methods:{getOrders:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"orders/"+t.id,!0),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?(t.orders=JSON.parse(e.responseText),t.calculateSumm(),t.addSatusSelect()):t.$parent.orderMsg="Have no orders"}},e.send()},getStatuses:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"status/",!0),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.statuses=s:t.msg="Statuses not found"}},e.send()},showOrderDetails:function(t){this.OrderToView=t},calculateSumm:function(){var t=this,e=t.orders;e.forEach(function(t){var e=0;t.books.forEach(function(t){e+=+t.price*+t.count-+t.price*+t.count*+t.discount/100}),t.summ=(e-e*t.u_disc/100).toFixed(2)}),t.orders=e},addSatusSelect:function(){var t=this,e=t.orders,s=t.statuses;e.forEach(function(t){t.showSelect=!1,t.stat=s.slice(),t.stat.forEach(function(e,s){e.id==t.s_id&&(t.stat.splice(s,1),t.newStatus="")})}),t.orders=e},show:function(t){var e=this,s=e.orders;s[t].showSelect||(s[t].showSelect=!s[t].showSelect,e.orders=s,e.refreshed=!1)},hide:function(t){var e=this,s=e.orders;s[t].showSelect&&(s[t].showSelect=!s[t].showSelect,e.orders=s,e.refreshed=!1)},save:function(t){var e=this,s=new XMLHttpRequest,a=n()({id:e.orders[t].id,id_status:e.orders[t].s_id});s.open("PUT",getUrl()+"orders/",!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.setRequestHeader("Authorization","Basic "+btoa(e.user.id+":"+e.user.hash)),s.onreadystatechange=function(){if(4==s.readyState)if(200!=s.status)alert(s.status+": "+s.statusText);else{var t=JSON.parse(s.responseText);t&&(e.$parent.orderMsg="Status Updated"),e.getOrders()}},s.send(a)},dateSort:function(){var t=this;t.sort=!1,t.refreshed=!1}},computed:{arrayToDraw:function(){var t=this,e=t.orders;return t.refreshed||(t.refreshed=!0,t.sort||(e=e.reverse())),e}}}},"5PMQ":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cart row",staticStyle:{margin:"20px"}},["cart"==t.content?s("div",{staticClass:"col",staticStyle:{"text-align":"center"}},[s("h4",[t._v("Cart")]),t._v(" "),t.booksInCart?s("div",[s("table",{staticClass:"table",staticStyle:{bacground:"#fce3c7"}},[t._m(0),t._v(" "),s("tbody",t._l(t.booksInCart,function(e,a){return s("tr",{key:e.id},[s("td",[s("input",{directives:[{name:"model",rawName:"v-model",value:t.booksInCart[a].checkbox,expression:"booksInCart[index].checkbox"}],attrs:{type:"checkbox",name:"",id:""},domProps:{checked:Array.isArray(t.booksInCart[a].checkbox)?t._i(t.booksInCart[a].checkbox,null)>-1:t.booksInCart[a].checkbox},on:{__c:function(e){var s=t.booksInCart[a].checkbox,n=e.target,r=!!n.checked;if(Array.isArray(s)){var o=t._i(s,null);n.checked?o<0&&(t.booksInCart[a].checkbox=s.concat([null])):o>-1&&(t.booksInCart[a].checkbox=s.slice(0,o).concat(s.slice(o+1)))}else t.booksInCart[a].checkbox=r}}})]),t._v(" "),s("td",[t._v("\n          "+t._s(e.title)+"\n        ")]),t._v(" "),s("td",[s("button",{staticClass:"plus btnn",on:{click:function(e){t.plus(a)}}},[t._v("+")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.booksInCart[a].count,expression:"booksInCart[index].count"}],staticClass:"count",attrs:{type:"text",size:"3"},domProps:{value:e.count,value:t.booksInCart[a].count},on:{input:function(e){e.target.composing||(t.booksInCart[a].count=e.target.value)}}}),t._v(" "),s("button",{staticClass:"minus btnn",on:{click:function(e){t.minus(a)}}},[t._v("-")])]),t._v(" "),s("td",[t._v("\n          "+t._s(e.price)+" $\n        ")]),t._v(" "),s("td",[t._v("\n          "+t._s(e.discount)+" %\n        ")]),t._v(" "),1===Math.sign(e.count)?s("td",[t._v("\n          "+t._s((e.price-e.price*e.discount/100).toFixed(2))+" $\n        ")]):s("td",[t._v("\n          -\n        ")]),t._v(" "),1===Math.sign(e.count)?s("td",[t._v("\n          "+t._s((e.price*e.count-e.price*e.discount/100).toFixed(2))+" $\n        ")]):s("td",[t._v("\n          -\n        ")])])}))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("span",{staticClass:"lighter"},[s("b",[t._v(t._s(t.saveMsg))])]),s("p",[s("button",{staticClass:"save btnn ",on:{click:function(e){t.refresh()}}},[t._v("Apply Changes")])]),t._v(" "),s("p",[s("span",[t._v("Total price:"+t._s(t.totalPrice)+" $")])]),t._v(" "),s("p",[s("span",[t._v("Your discount: "+t._s(t.user.discount)+" %")])]),t._v(" "),s("div",[t._v("Total price with your discount:"+t._s(t.totalWithUserDiscount)+" $"),s("p",[s("button",{staticClass:"checkout btnn",on:{click:function(e){t.goCheckOut()}}},[t._v("Check out")])])])])])]):s("div",[t._v("\n    "+t._s(t.msg)+"\n  ")])]):t._e(),t._v(" "),"checkout"==t.content?s("div",{staticClass:"checkout",staticStyle:{width:"300px",margin:"60px auto",background:"#fce3c7",padding:"10px"}},[s("div",{staticStyle:{width:"200px",margin:"auto",padding:"20px"}},[s("label",{attrs:{for:"form-check"}},[t._v("Choose Pay method:")]),t._v(" "),t._l(t.payment,function(e,a){return s("div",{key:e.id,staticClass:"form-check",staticStyle:{"text-align":"left"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedPayment,expression:"checkedPayment"}],staticClass:"form-check-input",attrs:{name:"id_payment",type:"radio",id:"gridRadios2"},domProps:{value:e.id,checked:t._q(t.checkedPayment,e.id)},on:{__c:function(s){t.checkedPayment=e.id}}}),t._v("\n          "+t._s(e.name))])})],2),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("button",{staticClass:"btnn",on:{click:function(e){t.addOrder()}}},[t._v("Add Order")]),t._v(" "),s("button",{staticClass:"btnn",on:{click:function(e){t.goCart()}}},[t._v("Back to Cart")])])]):t._e()])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("td",{staticStyle:{width:"50px"}},[t._v("Remove")]),s("td",[t._v("Title")]),s("td",[t._v("Count")]),s("td",[t._v("Price")]),s("td",[t._v("Discount")]),s("td",[t._v("Actual Price")]),s("td",[t._v("Summary")])])])}],r={render:a,staticRenderFns:n};e.a=r},"5fYM":function(t,e){},"5rYj":function(t,e){},"7gS+":function(t,e){},AOMq:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"test"},[s("h2",[t._v("Thank You!")]),t._v(" "),s("router-link",{attrs:{to:"/"}},[t._v("Back to shop")])],1)},n=[],r={render:a,staticRenderFns:n};e.a=r},AjHb:function(t,e,s){"use strict";var a=s("mvHQ"),n=s.n(a),r=s("OvRC"),o=s.n(r);e.a={name:"EditBook",beforeRouteUpdate:function(t,e,s){this.getBooks(t.params.id)&&(this.msg="",s())},data:function(){return{authors:"",genres:"",book:"",msg:"",bookGenres:"",bookAuthors:"",authorsToDelete:[],authorsToAdd:[],genresToDelete:[],genresToAdd:[],bookStatus:!0,user:""}},created:function(){this.getUserData(),this.getGenres(),this.getAuthors(),this.getBooks(this.$route.params.id)},methods:{checkAuth:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"auth/",!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?t.getUserInfo():(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserInfo:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"users/"+t.user.id,!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?(t.user=s[0],t.checkRole()):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserData:function(){var t=this;localStorage.user?t.user=JSON.parse(localStorage.user):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0"),t.checkAuth()},checkRole:function(){var t=this;"admin"!=t.user.role&&t.$router.push("/")},getAuthors:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"authors/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.authors=s:t.msg="Authors not found"}}},getGenres:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"genres/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.genres=s:t.msg="Genres not found"}}},getBooks:function(t){var e=this,s=new XMLHttpRequest;s.open("GET",getUrl()+"books/id/"+t+"/status/all",!0),s.send(),s.onreadystatechange=function(){if(4==s.readyState)if(200!=s.status)alert(s.status+": "+s.statusText);else{var t=JSON.parse(s.responseText);t?(e.book=t[0],e.bookGenres=e.book.genres,e.bookAuthors=e.book.authors,e.bookStatus=!!+e.book.status):e.$router.push("/admin/")}}},diff:function(t,e){var s,a=o()(null),n=[];for(s=0;s<t.length;++s)a[t[s].id]=t[s];for(s=0;s<e.length;++s)e[s].id in a?delete a[e[s].id]:a[e[s].id]=e[s];for(s in a)n.push(a[s]);return n},save:function(){var t=this;if(t.msg="",t.validForm()){var e=new XMLHttpRequest,s=n()({book:{id:t.book.id,title:t.book.title,description:t.book.description,price:t.book.price,discount:t.book.discount,status:t.bookStatus},authToDel:t.authorsToDelete,authToAdd:t.authorsToAdd,genToDel:t.genresToDelete,genToAdd:t.genresToAdd});e.open("PUT",getUrl()+"books/",!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);!0===s?(t.$parent.getBooks(),t.msg="Updated"):t.msg=s,t.getBooks(t.book.id)}},e.send(s)}},changeBookStatus:function(){var t=this;t.bookStatus=!t.bookStatus},validForm:function(){var t=this;return t.authorsToAdd.length+(t.bookAuthors.length-t.authorsToDelete.length)<1?(t.msg="book must have at least 1 author",!1):!(t.genresToAdd.length+(t.bookGenres.length-t.genresToDelete.length)<1)||(t.msg="book must have at least 1 genre",!1)}}}},BUMt:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-user"},[t._v("\n  EDIT USER "),s("b",[t._v(t._s(t.userData.id))]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-5"},[s("form",{staticStyle:{margin:"auto"}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.name,expression:"userData.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.userData.name},on:{input:function(e){e.target.composing||(t.userData.name=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.login,expression:"userData.login"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.userData.login},on:{input:function(e){e.target.composing||(t.userData.login=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[t._v("Discount")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.discount,expression:"userData.discount"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.userData.discount},on:{input:function(e){e.target.composing||(t.userData.discount=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v(" New password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.userData.pass,expression:"userData.pass"}],staticClass:"form-control",attrs:{type:"password",value:""},domProps:{value:t.userData.pass},on:{input:function(e){e.target.composing||(t.userData.pass=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[t._v(t._s(t.StatusString))]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){t.changeStatus()}}},[t._v("Change")])]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){t.save()}}},[t._v("Save")])]),t._v("\n          "+t._s(t.msg)+"\n      ")])]),t._v(" "),s("div",{staticClass:"row"},[s("button",{staticClass:"show",on:{click:function(e){t.showUserOrders()}}},[t._v("Show Orders\n   ")])]),t._v(" "),t.showOrdrers?s("div",{staticClass:"row"},[s("user-orders",{attrs:{id:t.userData.id,user:t.user}})],1):t._e()])},n=[],r={render:a,staticRenderFns:n};e.a=r},"F4/v":function(t,e,s){"use strict";function a(t){s("LI/8")}var n=s("Fex2"),r=s("LuT5"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-75a48f3c",null);e.a=u.exports},Fex2:function(t,e,s){"use strict";var a=s("mvHQ"),n=s.n(a);e.a={name:"Book",props:["book","user"],data:function(){return{count:1,msg:""}},created:function(){},methods:{addToCart:function(){var t=this,e=new XMLHttpRequest,s=n()({id_user:t.user.id,id_book:t.book.id,count:t.count});e.open("POST",getUrl()+"cart/",!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?(t.msg=s,t.count=1):t.msg="Count must me a positive Integer"}},e.send(s)}}}},Fs8J:function(t,e,s){"use strict";var a=s("mvHQ"),n=s.n(a),r=s("F4/v"),o=s("Zc39"),i=s("KTvf");e.a={name:"Home",data:function(){return{content:"",selectedBook:"",user:{},logMsg:"",login:{email:"",pass:""},filter:{type:"",id:""},authors:[],genres:[],books:[],errMsg:""}},created:function(){this.getUserData(),this.getAuthors(),this.getGenres(),this.getBooks()},methods:{signIn:function(){var t=this;t.logMsg="";var e=new XMLHttpRequest,s=n()({login:t.login.email,pass:t.login.pass});e.open("PUT",getUrl()+"auth/",!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?(t.user=s[0],localStorage.user=n()({id:t.user.id,hash:t.user.hash}),t.clearInputs()):t.logMsg="Wrong login or password"}},e.send(s)},showBookInfo:function(t){var e=this;e.selectedBook=t,e.content="book"},getAuthors:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"authors/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.authors=s:t.errMsg="Authors not found"}}},getGenres:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"genres/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.genres=s:t.errMsg="Genres not found"}}},getBooks:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"books/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.books=s:t.errMsg="Books not found"}}},setFilter:function(t,e){var s=this;s.filter.type=t,s.filter.id=e,s.refreshed=!1,s.content=""},logOut:function(){var t=this;t.content="",t.user={},delete localStorage.user,t.getUserData()},getUserData:function(){var t=this;localStorage.user?t.user=JSON.parse(localStorage.user):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0"),t.checkAuth()},checkAuth:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"auth/",!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?t.getUserInfo():(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserInfo:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"users/"+t.user.id,!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?t.user=s[0]:(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},clearInputs:function(){var t=this;t.login.email="",t.login.pass=""},showCart:function(){this.content="cart"},showOrders:function(){this.content="orders"}},computed:{filteredBooks:function(){var t=this,e=t.books;if(t.filter.type){var s=t.filter.type,a=t.filter.id;if("author"==s){var n=[];e.forEach(function(t,e){t.authors.forEach(function(e,s){e.id.includes(a)&&n.push(t)})})}else if("genre"==s){var n=[];e.forEach(function(t,e){t.genres.forEach(function(e,s){e.id.includes(a)&&n.push(t)})})}return n}return e},requestUrl:function(){var t=this;return"home"==t.location?t.reqUrl.home:t.reqUrl.class}},components:{"book-section":r.a,"cart-section":o.a,"order-section":i.a}}},JJT7:function(t,e,s){"use strict";var a=s("mvHQ"),n=s.n(a);e.a={name:"Register",data:function(){return{msg:"",login:"",name:"",pass:""}},methods:{submit:function(){var t=this,e=new XMLHttpRequest,s=n()({name:t.name,login:t.login,pass:t.pass});e.open("POST",getUrl()+"users/",!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);!0===s?(t.msg="Thank You! Please follow to Home page for Sign In",login="",name="",pass=""):t.msg=s}},e.send(s)}}}},KCYW:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user-orders"},[t.orders?s("div",{staticClass:"or-rowhead"},[s("div",{staticClass:"or-cell2"},[t._v("\n          Order ID\n        ")]),t._v(" "),s("div",{staticClass:"or-cell2"},[t._v("\n          User Id\n        ")]),t._v(" "),s("div",{staticClass:"or-cell3"},[t._v("\n          User name\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          User login\n        ")]),t._v(" "),s("div",{staticClass:"or-cell2"},[t._v("\n          User discount\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          Pay Method\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          Order Status\n        ")]),t._v(" "),s("div",{staticClass:"or-cell5"},[t._v("\n          Order Date\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          Order Total:\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[s("button",{staticClass:"sort",on:{click:function(e){t.dateSort()}}},[t._v("^")])])]):t._e(),t._v(" "),t._l(t.arrayToDraw,function(e,a){return s("div",{key:e.id},[s("div",{staticClass:"or-row",on:{click:function(e){t.show(a)}}},[s("div",{staticClass:"or-cell2"},[t._v("\n          "+t._s(e.id)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell2"},[t._v("\n          "+t._s(e.u_id)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell3"},[t._v("\n          "+t._s(e.u_name)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          "+t._s(e.u_login)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell2"},[t._v("\n          "+t._s(e.u_disc)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          "+t._s(e.p_name)+"\n        ")]),t._v(" "),0==e.showSelect?s("div",{staticClass:"or-cell4"},[t._v("\n          "+t._s(e.s_name)+"\n        ")]):t._e(),t._v(" "),1==e.showSelect?s("div",{staticClass:"or-cell4"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.s_id,expression:"order.s_id"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});e.s_id=t.target.multiple?s:s[0]}}},[s("option",{domProps:{value:e.s_id}},[t._v(t._s(e.s_name))]),t._v(" "),t._l(e.stat,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)]):t._e(),t._v(" "),s("div",{staticClass:"or-cell5"},[t._v("\n          "+t._s(e.date)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          "+t._s(e.summ)+" $\n        ")]),t._v(" "),1==e.showSelect?s("div",{staticClass:"or-cell4"},[s("button",{staticClass:"save",on:{click:function(e){t.save(a)}}},[t._v("Save")])]):t._e(),t._v(" "),0==e.showSelect?s("div",{staticClass:"or-cell4"}):t._e()]),t._v(" "),1==e.showSelect?s("div",[t._m(0,!0),t._v(" "),t._l(e.books,function(e){return s("div",{staticClass:"od-row"},[s("div",{staticClass:"od-cell1"},[t._v("\n              "+t._s(e.b_id)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell2"},[t._v("\n              "+t._s(e.title)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell3"},[t._v("\n              "+t._s(e.count)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell4"},[t._v("\n              "+t._s(e.price)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n              "+t._s(e.discount)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n              "+t._s((+e.price*+e.count-+e.count*+e.price*+e.discount/100).toFixed(2))+"\n            ")])])}),t._v(" "),s("div",{staticClass:"od-row"},[s("div",{staticClass:"od-cell4"},[s("button",{on:{click:function(e){t.hide(a)}}},[t._v("Hide")])])])],2):t._e()])})],2)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"or-row"},[s("div",{staticClass:"od-cell1"},[t._v("\n              Book Id\n            ")]),t._v(" "),s("div",{staticClass:"od-cell2"},[t._v("\n              Book Title\n            ")]),t._v(" "),s("div",{staticClass:"od-cell3"},[t._v("\n              Book count\n            ")]),t._v(" "),s("div",{staticClass:"od-cell4"},[t._v("\n              Book price\n            ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n              Book discount\n            ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n              Sum of position\n            ")])])}],r={render:a,staticRenderFns:n};e.a=r},KS52:function(t,e,s){"use strict";var a=s("mvHQ"),n=s.n(a);s("fV3n"),s("yc97"),s("yjWg"),s("dIqY"),s("h9m6");e.a={name:"Admin",data:function(){return{user:{},authors:"",genres:"",books:"",users:"",orders:"",newAuth:"",editAuth:"",newGenre:"",editGenre:"",editAuthName:"",editGenreName:"",authMsg:"",genreMsg:"",bookMsg:"",errMsg:"",content:"",editUser:"",editBook:""}},created:function(){this.getUserData(),this.getAuthors(),this.getGenres(),this.getBooks(),this.getUsers()},methods:{checkAuth:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"auth/",!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?t.getUserInfo():(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserInfo:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"users/"+t.user.id,!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?(t.user=s[0],t.checkRole()):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserData:function(){var t=this;localStorage.user?t.user=JSON.parse(localStorage.user):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0"),t.checkAuth()},checkRole:function(){var t=this;"admin"!=t.user.role&&t.$router.push("/")},test:function(){this.$parent.testik()},getAuthors:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"authors/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.authors=s:t.errMsg="Authors not found"}}},getGenres:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"genres/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.genres=s:t.errMsg="Genres not found"}}},getBooks:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"books/status/all",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.books=s:t.errMsg="Books not found"}}},addAuthor:function(){var t=this;if(t.newAuth){t.authMsg="";var e=new XMLHttpRequest,s=n()({name:t.newAuth});e.open("POST",getUrl()+"authors/",!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?(t.authMsg="Added",t.newAuth=""):t.authMsg="Check Name field",t.getAuthors()}},e.send(s)}else t.authMsg="Check Name field"},renameAuthor:function(){var t=this;if(t.authMsg="",t.editAuthName){var e=new XMLHttpRequest,s=n()({id:t.editAuth,name:t.editAuthName});e.open("PUT",getUrl()+"authors/",!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?(t.authMsg="Updated",t.editAuth="",t.editAuthName=""):t.authMsg="Check Name field",t.getAuthors()}},e.send(s)}else t.authMsg="Check name field"},deleteAuthor:function(){var t=this;if(t.authMsg="",t.editAuth){var e=new XMLHttpRequest;e.open("DELETE",getUrl()+"authors/id/"+t.editAuth,!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);t.authMsg=s?"Deleted":"Fail",t.getAuthors(),t.editAuth="",t.editAuthName=""}},e.send(null)}else t.authMsg="Select an Author"},addGenre:function(){var t=this;if(t.newGenre){t.genreMsg="";var e=new XMLHttpRequest,s=n()({name:t.newGenre});e.open("POST",getUrl()+"genres/",!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?(t.genreMsg="Added",t.newGenre="",t.getGenres()):t.genreMsg="Check Name field"}},e.send(s)}else t.genreMsg="Check name field"},renameGenre:function(){var t=this;if(t.genreMsg="",t.editGenreName&&t.editGenre){var e=new XMLHttpRequest,s=n()({id:t.editGenre,name:t.editGenreName});e.open("PUT",getUrl()+"genres/",!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?(t.genreMsg="Updated",t.editGenre="",t.editGenreName="",t.getGenres()):t.genreMsg="Check Name field"}},e.send(s)}else t.genreMsg="Check name field"},deleteGenre:function(){var t=this;if(t.genreMsg="",t.editGenre){var e=new XMLHttpRequest;e.open("DELETE",getUrl()+"genres/id/"+t.editGenre,!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?(t.genreMsg="Deleted",t.editGenre="",t.editGenreName="",t.getGenres()):t.genreMsg="Check Name field"}},e.send(null)}else t.genreMsg="Select a Genre"},getUsers:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"users/",!0),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.users=s:t.errMsg="Not found"}},e.send()},showOrders:function(){this.$router.push({path:"/admin/orders/"})},showAddBook:function(){this.content="addBook"},showEditUserDetails:function(){var t=this;t.editUser?t.$router.push({path:"/admin/edituser/"+t.editUser}):t.$router.push({path:"/admin/"})},showEditBook:function(){var t=this;t.editBook?t.$router.push({path:"/admin/editbook/"+t.editBook}):t.$router.push({path:"/admin/"})}},computed:{getBookToEdit:function(){var t=this;if(t.EditBook){var e=[],s=t.EditBook;return t.books.forEach(function(t){t.id==s&&e.push(t)}),e}}}}},KTvf:function(t,e,s){"use strict";function a(t){s("5fYM")}var n=s("eSQD"),r=s("aCBg"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-532267a5",null);e.a=u.exports},"LI/8":function(t,e){},LuT5:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"book row",staticStyle:{margin:"20px"}},[s("div",{staticClass:"col",staticStyle:{"text-align":"center"}},[s("h3",[t._v("Book Details")]),t._v(" "),s("div",{staticClass:"info"},[s("h4",[t._v(t._s(t.book.title))]),t._v(" "),s("p",[t._v(t._s(t.book.description))]),t._v(" "),s("p",[t._v("Authors: "),t._l(t.book.authors,function(e){return s("span",[t._v(t._s(e.name)+" ")])})],2),t._v(" "),s("p",[t._v("Genres: "),t._l(t.book.genres,function(e){return s("span",[t._v(t._s(e.name)+" ")])})],2),t._v(" "),s("p",[t._v("Price: "+t._s(t.book.price)+" $")]),t._v(" "),"guest"!=t.user.role?s("div",{staticClass:"add"},[t._v("\n        Count: "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],attrs:{type:"text"},domProps:{value:t.count},on:{input:function(e){e.target.composing||(t.count=e.target.value)}}}),t._v(" "),s("button",{staticClass:"add-to-cart btnn",on:{click:function(e){t.addToCart()}}},[t._v("Add to Cart")]),t._v(" "),s("p",[t._v(t._s(t.msg))])]):t._e()])])])},n=[],r={render:a,staticRenderFns:n};e.a=r},M93x:function(t,e,s){"use strict";function a(t){s("S9kR")}var n=s("xJD8"),r=s("/EjT"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,null,null);e.a=u.exports},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),n=s("M93x"),r=s("YaEn");a.a.config.productionTip=!1,new a.a({el:"#app",router:r.a,template:"<App/>",components:{App:n.a}})},Qdcd:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"reg row"},[s("div",{staticClass:"col-md-5",staticStyle:{width:"400px"},attrs:{id:"regform"}},[s("form",{attrs:{role:"form "}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Email")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.login,expression:"login"}],staticClass:"form-control",attrs:{type:"email",id:"exampleInputEmail1",placeholder:"Enter email"},domProps:{value:t.login},on:{input:function(e){e.target.composing||(t.login=e.target.value)}}}),t._v(" "),s("small",{staticClass:"text-muted",attrs:{id:"passwordHelpInline"}},[t._v("\n          example@gmail.com\n          ")])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputName"}},[t._v("Name")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"exampleInputPassword1",placeholder:"Name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),s("small",{staticClass:"text-muted",attrs:{id:"passwordHelpInline"}},[t._v("\n          Must be 3-20 characters long, contain letters, and must not contain spaces, special characters, or emoji. \n          ")])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Password")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.pass,expression:"pass"}],staticClass:"form-control",attrs:{type:"password",id:"exampleInputPassword1",placeholder:"Password"},domProps:{value:t.pass},on:{input:function(e){e.target.composing||(t.pass=e.target.value)}}}),t._v(" "),s("small",{staticClass:"text-muted",attrs:{id:"passwordHelpInline"}},[t._v("\n             Must be 8-20 characters long, contain letters and numbers, and must not contain spaces, special characters, or emoji.\n          ")])]),t._v(" "),s("button",{staticClass:"btn btn-default",on:{click:function(e){t.submit()}}},[t._v("Submit")]),t._v(" "),s("router-link",{attrs:{to:"/"}},[s("button",{staticClass:"btn btn-default"},[t._v("Home")])]),t._v(" "),s("p",{staticStyle:{padding:"10px"}},[t._v(t._s(t.msg))])],1)])])},n=[],r={render:a,staticRenderFns:n};e.a=r},S9kR:function(t,e){},SAbG:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"admin-home"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-3 left"},[s("router-link",{attrs:{to:"/"}},[t._v("Home")]),t._v(" "),s("div",{staticClass:"authors"},[t._v("\n        Authors:\n        "),s("div",{staticClass:"new-author"},[t._v("\n          Author name:"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newAuth,expression:"newAuth"}],attrs:{type:"text"},domProps:{value:t.newAuth},on:{input:function(e){e.target.composing||(t.newAuth=e.target.value)}}}),t._v(" "),s("button",{staticClass:"add-auth btnn",on:{click:function(e){t.addAuthor()}}},[t._v("Add")])]),t._v(" "),s("div",{staticClass:"edit"},[t._v("\n          Edit or delete:"),s("select",{directives:[{name:"model",rawName:"v-model",value:t.editAuth,expression:"editAuth"}],staticClass:"authors",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.editAuth=e.target.multiple?s:s[0]}}},[s("option",{staticClass:"default",attrs:{value:""}},[t._v("Select Author")]),t._v(" "),t._l(t.authors,function(e,a){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),t.editAuth?s("div",{staticClass:"ed-a"},[t._v("\n            New name:"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editAuthName,expression:"editAuthName"}],attrs:{type:"text"},domProps:{value:t.editAuthName},on:{input:function(e){e.target.composing||(t.editAuthName=e.target.value)}}}),t._v(" "),s("button",{staticClass:"del-auth btnn",on:{click:function(e){t.renameAuthor()}}},[t._v("Rename")]),t._v(" "),s("button",{staticClass:"del-auth btnn",on:{click:function(e){t.deleteAuthor()}}},[t._v("Delete")])]):t._e()]),t._v(" "),s("div",{staticClass:"auth-msg"},[t._v("\n          "+t._s(t.authMsg)+"\n        ")])]),t._v(" "),s("div",{staticClass:"genres"},[t._v("\n      Genres:\n        "),s("div",{staticClass:"new-genre"},[t._v("\n          Genre name:"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.newGenre,expression:"newGenre"}],attrs:{type:"text"},domProps:{value:t.newGenre},on:{input:function(e){e.target.composing||(t.newGenre=e.target.value)}}}),t._v(" "),s("button",{staticClass:"add-genre btnn",on:{click:function(e){t.addGenre()}}},[t._v("Add")])]),t._v(" "),s("div",{staticClass:"edit"},[t._v("\n        Edit or delete:"),s("select",{directives:[{name:"model",rawName:"v-model",value:t.editGenre,expression:"editGenre"}],staticClass:"genres",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.editGenre=e.target.multiple?s:s[0]}}},[s("option",{staticClass:"default",attrs:{value:""}},[t._v("Select Genre")]),t._v(" "),t._l(t.genres,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),t.editGenre?s("div",{staticClass:"ed-g"},[t._v("\n          New name:"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editGenreName,expression:"editGenreName"}],attrs:{type:"text"},domProps:{value:t.editGenreName},on:{input:function(e){e.target.composing||(t.editGenreName=e.target.value)}}}),t._v(" "),s("button",{staticClass:"del-genre btnn",on:{click:function(e){t.renameGenre()}}},[t._v("Rename")]),t._v(" "),s("button",{staticClass:"del-genre btnn",on:{click:function(e){t.deleteGenre()}}},[t._v("Delete")])]):t._e()]),t._v(" "),s("div",{staticClass:"genre-msg"},[t._v("\n        "+t._s(t.genreMsg)+"\n      ")])]),t._v(" "),s("div",{staticClass:"books"},[t._v("\n      Books:\n      "),s("div",[s("router-link",{attrs:{to:"/admin/addbook/"}},[s("button",{staticClass:"add-user btnn"},[t._v("Add Book")])])],1),t._v(" "),s("p",[s("select",{directives:[{name:"model",rawName:"v-model",value:t.editBook,expression:"editBook"}],staticClass:"books",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.editBook=e.target.multiple?s:s[0]}}},[s("option",{staticClass:"default",attrs:{value:""}},[t._v("Select Book")]),t._v(" "),t._l(t.books,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.title))])})],2),t._v(" "),s("button",{staticClass:"btnn",on:{click:function(e){t.showEditBook()}}},[t._v("Edit")])]),t._v(" "),s("div",{staticClass:"book-msg"},[t._v("\n          "+t._s(t.bookMsg)+"\n        ")])]),t._v(" "),s("div",{staticClass:"users"},[t._v("\n      Users:\n      "),s("div",{staticClass:"new-user"},[s("router-link",{attrs:{to:"/admin/adduser/"}},[s("button",{staticClass:"add-user btnn"},[t._v("Add User")])])],1),t._v(" "),s("div",{staticClass:"edit"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.editUser,expression:"editUser"}],staticClass:"sel-users",attrs:{name:"",id:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.editUser=e.target.multiple?s:s[0]}}},[s("option",{staticClass:"default",attrs:{value:""}},[t._v("Select User")]),t._v(" "),t._l(t.users,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})],2),t._v(" "),s("button",{staticClass:"edit-user btnn",on:{click:function(e){t.showEditUserDetails()}}},[t._v("Edit User")])])]),t._v(" "),s("div",{staticClass:"orders"},[s("button",{staticClass:"view-orders btnn",on:{click:function(e){t.showOrders()}}},[t._v("View Orders")])])],1),t._v(" "),s("div",{staticClass:"col-md-9 right "},[s("h2",{staticStyle:{"text-align":"center"}},[t._v("Admin bookshop")]),t._v(" "),s("div",{staticClass:"row",staticStyle:{margin:"40px"}},[s("router-view")],1)])])])},n=[],r={render:a,staticRenderFns:n};e.a=r},VVzM:function(t,e,s){"use strict";var a=s("mvHQ"),n=s.n(a);e.a={name:"Orders",data:function(){return{orders:"",statuses:"",refreshed:!1,sort:!0,user:""}},created:function(){this.getUserData(),this.getStatuses(),this.getOrders()},methods:{checkAuth:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"auth/",!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?t.getUserInfo():(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserInfo:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"users/"+t.user.id,!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?(t.user=s[0],t.checkRole()):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserData:function(){var t=this;localStorage.user?t.user=JSON.parse(localStorage.user):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0"),t.checkAuth()},checkRole:function(){var t=this;"admin"!=t.user.role&&t.$router.push("/")},getOrders:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"orders/",!0),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);"string"==typeof s?t.msg=s:(t.orders=JSON.parse(e.responseText),t.calculateSumm(),t.addSatusSelect())}},e.send()},getStatuses:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"status/",!0),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);"string"==typeof s?t.msg=s:t.statuses=JSON.parse(e.responseText)}},e.send()},showOrderDetails:function(t){this.OrderToView=t},calculateSumm:function(){var t=this,e=t.orders;e.forEach(function(t){var e=0;t.books.forEach(function(t){e+=+t.price*+t.count-+t.price*+t.count*+t.discount/100}),t.summ=(e-e*t.u_disc/100).toFixed(2)}),t.orders=e},addSatusSelect:function(){var t=this,e=t.orders,s=t.statuses;e.forEach(function(t){t.showSelect=!1,t.stat=s.slice(),t.stat.forEach(function(e,s){e.id==t.s_id&&(t.stat.splice(s,1),t.newStatus="")})}),t.orders=e},show:function(t){var e=this,s=e.orders;s[t].showSelect||(s[t].showSelect=!s[t].showSelect,e.orders=s,e.refreshed=!1)},hide:function(t){var e=this,s=e.orders;s[t].showSelect&&(s[t].showSelect=!s[t].showSelect,e.orders=s,e.refreshed=!1)},save:function(t){var e=this,s=new XMLHttpRequest,a=n()({id:e.orders[t].id,id_status:e.orders[t].s_id});s.open("PUT",getUrl()+"orders/",!0),s.setRequestHeader("Content-type","application/json; charset=utf-8"),s.setRequestHeader("Authorization","Basic "+btoa(e.user.id+":"+e.user.hash)),s.onreadystatechange=function(){4==s.readyState&&(200!=s.status?alert(s.status+": "+s.statusText):e.getOrders())},s.send(a)},dateSort:function(){var t=this;t.sort=!1,t.refreshed=!1}},computed:{arrayToDraw:function(){var t=this,e=t.orders;return t.refreshed||(t.refreshed=!0,t.sort||(e=e.reverse())),e}}}},Vb6a:function(t,e,s){"use strict";e.a={name:"TY",data:function(){return{}}}},XDlu:function(t,e){},YaEn:function(t,e,s){"use strict";var a=s("7+uW"),n=s("/ocq"),r=s("lO7g"),o=s("dIqY"),i=s("qbhH"),u=s("h9m6"),c=s("yjWg"),l=s("fV3n"),d=s("yc97"),v=s("skpY");a.a.use(n.a),e.a=new n.a({routes:[{path:"/",name:"Home",component:r.a},{path:"/register/",name:"Register",component:o.a},{path:"/thankyou/",name:"TY",component:v.a},{path:"/admin/",name:"Admin",component:i.a,children:[{path:"adduser",component:o.a},{path:"edituser/:id",component:u.a},{path:"editbook/:id",component:c.a},{path:"orders",component:l.a},{path:"addbook",component:d.a}]}]})},Zc39:function(t,e,s){"use strict";function a(t){s("fn5X")}var n=s("/w5R"),r=s("5PMQ"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-4e150519",null);e.a=u.exports},ZuLV:function(t,e){},aCBg:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orders"},[s("h4",[t._v(" My Orders:")]),t._v(" "),s("p",[t._v(t._s(t.msg))]),t._v(" "),t.orders?s("div",[s("div",{staticClass:"or-rowhead"},[s("div",{staticClass:"or-cell2"},[t._v("\n          Order ID\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          User discount\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          Pay Method\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          Order Status\n        ")]),t._v(" "),s("div",{staticClass:"or-cell5"},[t._v("\n          Order Date\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          Order Total:\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[s("button",{staticClass:"sort",on:{click:function(e){t.dateSort()}}},[t._v("^")])])]),t._v(" "),t._l(t.arrayToDraw,function(e,a){return s("div",{key:e.id},[s("div",{staticClass:"or-row",on:{click:function(e){t.show(a)}}},[s("div",{staticClass:"or-cell2"},[t._v("\n              "+t._s(e.id)+"\n            ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n              "+t._s(e.u_disc)+"\n            ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n              "+t._s(e.p_name)+"\n            ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n              "+t._s(e.s_name)+"\n            ")]),t._v(" "),s("div",{staticClass:"or-cell5"},[t._v("\n              "+t._s(e.date)+"\n            ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n              "+t._s(e.summ)+" $\n            ")]),t._v(" "),s("div",{staticClass:"or-cell4"})]),t._v(" "),1==e.showSelect?s("div",[t._m(0,!0),t._v(" "),t._l(e.books,function(e){return s("div",{staticClass:"od-row"},[s("div",{staticClass:"od-cell1"},[t._v("\n                  "+t._s(e.b_id)+"\n                ")]),t._v(" "),s("div",{staticClass:"od-cell2"},[t._v("\n                  "+t._s(e.title)+"\n                ")]),t._v(" "),s("div",{staticClass:"od-cell3"},[t._v("\n                  "+t._s(e.count)+"\n                ")]),t._v(" "),s("div",{staticClass:"od-cell4"},[t._v("\n                  "+t._s(e.price)+"\n                ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n                  "+t._s(e.discount)+"\n                ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n                  "+t._s((+e.price*+e.count-+e.count*+e.price*+e.discount/100).toFixed(2))+"\n                ")])])}),t._v(" "),s("div",{staticClass:"od-row"},[s("div",{staticClass:"od-cell4"},[s("button",{on:{click:function(e){t.hide(a)}}},[t._v("Hide")])])])],2):t._e()])})],2):t._e()])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"or-row"},[s("div",{staticClass:"od-cell1"},[t._v("\n                  Book Id\n                ")]),t._v(" "),s("div",{staticClass:"od-cell2"},[t._v("\n                  Book Title\n                ")]),t._v(" "),s("div",{staticClass:"od-cell3"},[t._v("\n                  Book count\n                ")]),t._v(" "),s("div",{staticClass:"od-cell4"},[t._v("\n                  Book price\n                ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n                  Book discount\n                ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n                  Sum of position\n                ")])])}],r={render:a,staticRenderFns:n};e.a=r},bR9s:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"add-book"},[s("h4",[t._v("Add Book")]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-5"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Book Title")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Description")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.desc,expression:"desc"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:t.desc},on:{input:function(e){e.target.composing||(t.desc=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[t._v("Price")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.price,expression:"price"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.price},on:{input:function(e){e.target.composing||(t.price=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[t._v("Discount")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.disc,expression:"disc"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.disc},on:{input:function(e){e.target.composing||(t.disc=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Authors to Add")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedAuthors,expression:"selectedAuthors"}],staticClass:"form-control",attrs:{multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedAuthors=e.target.multiple?s:s[0]}}},t._l(t.authors,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Genres to add")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedGenres,expression:"selectedGenres"}],staticClass:"form-control",attrs:{multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedGenres=e.target.multiple?s:s[0]}}},t._l(t.genres,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){t.addBook()}}},[t._v("Add")])]),t._v("\n        "+t._s(t.errMsg)+"\n    ")])])])},n=[],r={render:a,staticRenderFns:n};e.a=r},dIqY:function(t,e,s){"use strict";function a(t){s("wisE")}var n=s("JJT7"),r=s("Qdcd"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,null,null);e.a=u.exports},eSQD:function(t,e,s){"use strict";e.a={name:"Cart",props:["user"],data:function(){return{orders:"",refreshed:!1,msg:"",sort:!0}},created:function(){this.getOrders()},methods:{getOrders:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"orders/"+t.user.id,!0),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?(t.orders=JSON.parse(e.responseText),t.calculateSumm()):t.msg="You have no orders yet"}},e.send()},show:function(t){var e=this,s=e.orders;s[t].showSelect||(s[t].showSelect=!s[t].showSelect,e.orders=s,e.refreshed=!1)},hide:function(t){var e=this,s=e.orders;s[t].showSelect&&(s[t].showSelect=!s[t].showSelect,e.orders=s,e.refreshed=!1)},calculateSumm:function(){var t=this,e=t.orders;e.forEach(function(t){var e=0;t.books.forEach(function(t){e+=+t.price*+t.count-+t.price*+t.count*+t.discount/100}),t.summ=(e-e*t.u_disc/100).toFixed(2)}),t.orders=e},dateSort:function(){var t=this;t.sort=!1,t.refreshed=!1}},computed:{arrayToDraw:function(){var t=this,e=t.orders;return t.refreshed||(t.refreshed=!0,t.sort||(e=e.reverse())),e}}}},fV3n:function(t,e,s){"use strict";function a(t){s("2dOA")}var n=s("VVzM"),r=s("hQMb"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-b61dc5aa",null);e.a=u.exports},fn5X:function(t,e){},h9m6:function(t,e,s){"use strict";function a(t){s("/r5n")}var n=s("1GKN"),r=s("BUMt"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-55fa9024",null);e.a=u.exports},hQMb:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.orders?s("div",{staticClass:"orders"},[s("div",{staticClass:"or-rowhead"},[s("div",{staticClass:"or-cell2"},[t._v("\n          Order ID\n        ")]),t._v(" "),s("div",{staticClass:"or-cell2"},[t._v("\n          User Id\n        ")]),t._v(" "),s("div",{staticClass:"or-cell3"},[t._v("\n          User name\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          User login\n        ")]),t._v(" "),s("div",{staticClass:"or-cell3"},[t._v("\n          User discount\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          Pay Method\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          Order Status\n        ")]),t._v(" "),s("div",{staticClass:"or-cell5"},[t._v("\n          Order Date\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          Order Total:\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"}),t._v(" "),s("button",{staticClass:"sort",on:{click:function(e){t.dateSort()}}},[t._v("^")])]),t._v(" "),t._l(t.arrayToDraw,function(e,a){return s("div",{key:e.id},[s("div",{staticClass:"or-row",on:{click:function(e){t.show(a)}}},[s("div",{staticClass:"or-cell2"},[t._v("\n          "+t._s(e.id)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell2"},[t._v("\n          "+t._s(e.u_id)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell3"},[t._v("\n          "+t._s(e.u_name)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          "+t._s(e.u_login)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell2"},[t._v("\n          "+t._s(e.u_disc)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          "+t._s(e.p_name)+"\n        ")]),t._v(" "),0==e.showSelect?s("div",{staticClass:"or-cell4"},[t._v("\n          "+t._s(e.s_name)+"\n        ")]):t._e(),t._v(" "),1==e.showSelect?s("div",{staticClass:"or-cell4"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.s_id,expression:"order.s_id"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});e.s_id=t.target.multiple?s:s[0]}}},[s("option",{domProps:{value:e.s_id}},[t._v(t._s(e.s_name))]),t._v(" "),t._l(e.stat,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])})],2)]):t._e(),t._v(" "),s("div",{staticClass:"or-cell5"},[t._v("\n          "+t._s(e.date)+"\n        ")]),t._v(" "),s("div",{staticClass:"or-cell4"},[t._v("\n          "+t._s(e.summ)+" $\n        ")]),t._v(" "),1==e.showSelect?s("div",{staticClass:"or-cell4"},[s("button",{staticClass:"save",on:{click:function(e){t.save(a)}}},[t._v("Save")])]):t._e(),t._v(" "),0==e.showSelect?s("div",{staticClass:"or-cell4"}):t._e()]),t._v(" "),1==e.showSelect?s("div",[t._m(0,!0),t._v(" "),t._l(e.books,function(e){return s("div",{staticClass:"od-row"},[s("div",{staticClass:"od-cell1"},[t._v("\n              "+t._s(e.b_id)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell2"},[t._v("\n              "+t._s(e.title)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell3"},[t._v("\n              "+t._s(e.count)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell4"},[t._v("\n              "+t._s(e.price)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n              "+t._s(e.discount)+"\n            ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n              "+t._s((+e.price*+e.count-+e.count*+e.price*+e.discount/100).toFixed(2))+"\n            ")])])}),t._v(" "),s("div",{staticClass:"od-row"},[s("div",{staticClass:"od-cell4"},[s("button",{on:{click:function(e){t.hide(a)}}},[t._v("Hide")])])])],2):t._e()])})],2):t._e()},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"or-row"},[s("div",{staticClass:"od-cell1"},[t._v("\n              Book Id\n            ")]),t._v(" "),s("div",{staticClass:"od-cell2"},[t._v("\n              Book Title\n            ")]),t._v(" "),s("div",{staticClass:"od-cell3"},[t._v("\n              Book count\n            ")]),t._v(" "),s("div",{staticClass:"od-cell4"},[t._v("\n              Book price\n            ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n              Book discount\n            ")]),t._v(" "),s("div",{staticClass:"od-cell5"},[t._v("\n              Sum of position\n            ")])])}],r={render:a,staticRenderFns:n};e.a=r},jvEO:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"main"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-2 left"},[s("div",{staticClass:"row menu"},[s("div",{staticClass:"col",staticStyle:{margin:"20px auto"}},[s("div",{staticClass:"row",staticStyle:{"text-align":"center"}},[s("b",[t._v("Welcome "+t._s(t.user.name))])]),t._v(" "),s("div",{staticClass:"row",staticStyle:{"margin-top":"30px auto"}},[""==t.user.name?s("div",{staticClass:"log-form col"},[s("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Login Form")]),t._v(" "),t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.login.email,expression:"login.email"}],attrs:{placeholder:"Enter email",type:"text"},domProps:{value:t.login.email},on:{input:function(e){e.target.composing||(t.login.email=e.target.value)}}}),t._v(" "),s("label",{attrs:{for:"exampleInputPassword1"}},[t._v("Password:")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.login.pass,expression:"login.pass"}],attrs:{type:"password",placeholder:"Password"},domProps:{value:t.login.pass},on:{input:function(e){e.target.composing||(t.login.pass=e.target.value)}}}),t._v(" "),s("p",[s("button",{staticClass:"login",on:{click:t.signIn}},[t._v("Log In")])]),t._v(" "),s("p",[t._v(t._s(t.logMsg))]),t._v(" "),s("p",[s("router-link",{attrs:{to:"/register/"}},[t._v("Registration")])],1)]):s("div",{staticClass:"col",staticStyle:{"text-align":"center"}},[s("p",[s("a",{attrs:{href:"#"},on:{click:function(e){t.logOut()}}},[t._v("Log Out")])]),t._v(" "),s("p",[s("a",{attrs:{href:"#"},on:{click:function(e){t.showCart()}}},[t._v("Cart")])]),t._v(" "),s("p",[s("a",{attrs:{href:"#"},on:{click:function(e){t.showOrders()}}},[t._v("My Orders")])]),t._v(" "),"admin"==t.user.role?s("div",{staticClass:"admin"},[s("p",[s("router-link",{attrs:{to:"/admin/",role:t.user.role}},[t._v("Admin Panel")])],1)]):t._e()])])])]),t._v(" "),s("div",{staticClass:"row",staticStyle:{margin:"20px"}},[s("div",{staticClass:"showbooks"},[s("h4",[s("a",{attrs:{href:"#"},on:{click:function(e){t.setFilter("","")}}},[t._v("Show All books")])])]),t._v(" "),s("div",{staticClass:"authors"},[s("h4",[t._v("Authors:")]),t._v(" "),t._l(t.authors,function(e){return s("div",[s("a",{attrs:{href:"#"},on:{click:function(s){t.setFilter("author",e.id)}}},[t._v(t._s(e.name))])])})],2),t._v(" "),s("div",{staticClass:"genres"},[s("h4",[t._v("Genres:")]),t._v(" "),t._l(t.genres,function(e){return s("div",[s("a",{attrs:{href:"#"},on:{click:function(s){t.setFilter("genre",e.id)}}},[t._v(t._s(e.name))])])})],2),t._v(" "),s("div",{staticClass:"books"},[s("h4",[t._v("Books:")]),t._v(" "),t._l(t.books,function(e){return s("div",[s("a",{attrs:{href:"#"},on:{click:function(s){t.showBookInfo(e)}}},[t._v(t._s(e.title))])])})],2)])]),t._v(" "),s("div",{staticClass:"col-md-10 right"},[s("div",{staticClass:"row"},["orders"==t.content?s("div",[s("order-section",{attrs:{user:t.user}})],1):t._e(),t._v(" "),"book"==t.content?s("div",[s("book-section",{attrs:{book:t.selectedBook,user:t.user}})],1):t._e(),t._v(" "),"cart"==t.content?s("div",[s("cart-section",{attrs:{user:t.user}})],1):t._e(),t._v(" "),""==t.content?s("div",{staticClass:"col"},[s("table",{staticClass:"table",staticStyle:{margin:"20px",background:"#fce3c7"}},[t._m(1),t._v(" "),s("tbody",t._l(t.filteredBooks,function(e,a){return s("tr",[s("td",{staticClass:"col"},[s("a",{attrs:{href:"#"},on:{click:function(s){t.showBookInfo(e)}}},[t._v(t._s(e.title))])]),t._v(" "),s("td",{staticClass:"col"},[t._v(t._s(e.description))]),t._v(" "),s("td",{staticClass:"col"},[t._v(t._s(e.price)+" $")]),t._v(" "),s("td",{staticClass:"col"},t._l(e.authors,function(e){return s("span",[s("a",{attrs:{href:"#"},on:{click:function(s){t.setFilter("author",e.id)}}},[t._v(" \n              "+t._s(e.name)+" \n              ")])])})),t._v(" "),s("td",{staticClass:"col"},t._l(e.genres,function(e){return s("span",[s("a",{attrs:{href:"#"},on:{click:function(s){t.setFilter("genre",e.id)}}},[t._v(" \n                "+t._s(e.name)+" \n                ")])])})),t._v(" "),s("td",{staticClass:"col"},[t._v(t._s(e.discount)+" %")]),t._v(" "),s("td",{staticClass:"col"},[t._v(t._s((e.price-e.price*e.discount/100).toFixed(2))+" $")])])}))])]):t._e()])])])])},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("p",[s("label",[t._v("Email address:")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("td",{staticClass:"col"},[s("b",[t._v("Title")])]),t._v(" "),s("td",{staticClass:"col"},[s("b",[t._v("Description")])]),t._v(" "),s("td",{staticClass:"col"},[s("b",[t._v("Price")])]),t._v(" "),s("td",{staticClass:"col"},[s("b",[t._v("Authors")])]),t._v(" "),s("td",{staticClass:"col"},[s("b",[t._v("Genres")])]),t._v(" "),s("td",{staticClass:"col"},[s("b",[t._v("Discount")])]),t._v(" "),s("td",{staticClass:"col"},[s("b",[t._v("Discounted price")])])])])}],r={render:a,staticRenderFns:n};e.a=r},lO7g:function(t,e,s){"use strict";function a(t){s("+B+H")}var n=s("Fs8J"),r=s("jvEO"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-30b68758",null);e.a=u.exports},qZ1V:function(t,e,s){"use strict";var a=s("mvHQ"),n=s.n(a);e.a={name:"Book",data:function(){return{authors:"",genres:"",selectedAuthors:[],selectedGenres:[],title:"",desc:"",price:"",disc:"",errMsg:"",user:{}}},created:function(){this.getUserData(),this.getGenres(),this.getAuthors()},methods:{checkAuth:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"auth/",!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?t.getUserInfo():(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserInfo:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"users/"+t.user.id,!0),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status);else{var s=JSON.parse(e.responseText);s?(t.user=s[0],t.checkRole()):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0")}},e.send()},getUserData:function(){var t=this;localStorage.user?t.user=JSON.parse(localStorage.user):(t.user.name="",t.user.role="guest",t.user.id="0",t.user.hash="0"),t.checkAuth()},checkRole:function(){var t=this;"admin"!=t.user.role&&t.$router.push("/")},getAuthors:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"authors/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.authors=s:t.errMsg="Authors not found"}}},getGenres:function(){var t=this,e=new XMLHttpRequest;e.open("GET",getUrl()+"genres/",!0),e.send(),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);s?t.genres=s:t.errMsg="Genres not found"}}},addBook:function(){var t=this;if(t.validForm()){var e=new XMLHttpRequest,s=n()({book:{title:t.title,description:t.desc,price:t.price,discount:t.disc},authors:t.selectedAuthors,genres:t.selectedGenres});e.open("POST",getUrl()+"books/",!0),e.setRequestHeader("Content-type","application/json; charset=utf-8"),e.setRequestHeader("Authorization","Basic "+btoa(t.user.id+":"+t.user.hash)),e.onreadystatechange=function(){if(4==e.readyState)if(200!=e.status)alert(e.status+": "+e.statusText);else{var s=JSON.parse(e.responseText);!0===s?(t.errMsg="Added",t.$router.push({path:"/admin/"})):t.errMsg=s,t.$parent.getBooks()}},e.send(s)}},validForm:function(){var t=this;return t.errMsg="",t.selectedAuthors<1?(t.errMsg="Book must have at least 1 author",!1):t.selectedGenres<1?(t.errMsg="Book must have at least 1 genre",!1):t.title?t.desc?t.price?!!t.disc||(t.errMsg="Check Discount field",!1):(t.errMsg="Check Price field",!1):(t.errMsg="Check Description field",!1):(t.errMsg="Check Title field",!1)}}}},qbhH:function(t,e,s){"use strict";function a(t){s("24Rr")}var n=s("KS52"),r=s("SAbG"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-6bc6fb26",null);e.a=u.exports},skpY:function(t,e,s){"use strict";function a(t){s("5rYj")}var n=s("Vb6a"),r=s("AOMq"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-0f35d21e",null);e.a=u.exports},tnwY:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"edit-book row"},[s("h4",[t._v("Edit Book "),s("b",[t._v(t._s(t.book.title))])]),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-5"},[s("form",[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"exampleInputEmail1"}},[t._v("Book Title")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.title,expression:"book.title"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.title},on:{input:function(e){e.target.composing||(t.book.title=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Description")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.description,expression:"book.description"}],staticClass:"form-control",attrs:{rows:"3"},domProps:{value:t.book.description},on:{input:function(e){e.target.composing||(t.book.description=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[t._v("Price")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.price,expression:"book.price"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.price},on:{input:function(e){e.target.composing||(t.book.price=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input-group"},[s("span",{staticClass:"input-group-addon"},[t._v("Discount")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.book.discount,expression:"book.discount"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.book.discount},on:{input:function(e){e.target.composing||(t.book.discount=e.target.value)}}})]),t._v(" "),s("div",{staticClass:"input-group"},[t.bookStatus?s("span",{staticClass:"input-group-addon"},[t._v("Active")]):t._e(),t._v(" "),t.bookStatus?t._e():s("span",{staticClass:"input-group-addon"},[s("b",[t._v("Not Active")])]),t._v(" "),s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){t.changeBookStatus()}}},[t._v("Change")])]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Authors to delete")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.authorsToDelete,expression:"authorsToDelete"}],staticClass:"form-control",attrs:{multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.authorsToDelete=e.target.multiple?s:s[0]}}},t._l(t.book.authors,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Authors to Add")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.authorsToAdd,expression:"authorsToAdd"}],staticClass:"form-control",attrs:{multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.authorsToAdd=e.target.multiple?s:s[0]}}},t._l(t.diff(t.authors,t.bookAuthors),function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Genres to delete")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.genresToDelete,expression:"genresToDelete"}],staticClass:"form-control",attrs:{multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.genresToDelete=e.target.multiple?s:s[0]}}},t._l(t.book.genres,function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))]),t._v(" "),s("div",{staticClass:"form-group"},[s("label",[t._v("Genres to add")]),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.genresToAdd,expression:"genresToAdd"}],staticClass:"form-control",attrs:{multiple:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.genresToAdd=e.target.multiple?s:s[0]}}},t._l(t.diff(t.genres,t.bookGenres),function(e){return s("option",{domProps:{value:e.id}},[t._v(t._s(e.name))])}))]),t._v(" "),s("button",{staticClass:"btn btn-primary btn-lg btn-block",attrs:{type:"button"},on:{click:function(e){t.save()}}},[t._v("Update")])]),t._v("\n        "+t._s(t.msg)+"\n    ")])])])},n=[],r={render:a,staticRenderFns:n};e.a=r},wisE:function(t,e){},xJD8:function(t,e,s){"use strict";e.a={name:"app",data:function(){return{}}}},yc97:function(t,e,s){"use strict";function a(t){s("ZuLV")}var n=s("qZ1V"),r=s("bR9s"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-2f554dc1",null);e.a=u.exports},yjWg:function(t,e,s){"use strict";function a(t){s("XDlu")}var n=s("AjHb"),r=s("tnwY"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-5c61480c",null);e.a=u.exports},z8oB:function(t,e,s){"use strict";function a(t){s("7gS+")}var n=s("4eyV"),r=s("KCYW"),o=s("VU/8"),i=a,u=o(n.a,r.a,!1,i,"data-v-cfbdc754",null);e.a=u.exports}},["NHnr"]);
//# sourceMappingURL=app.5cb58fc255bfa1d8ba41.js.map